{% extends "site_base.html" %}

{% load i18n %}

{# Fix static files #}
{% block js %}
<script type="text/javascript" charset="utf-8" src="{{ STATIC_URL }}js/search.js"></script>
{% endblock %}

{% block nav-qa %} class="active"{% endblock %}

{% block page-title %}{% trans "Questions" %}{% endblock %}

{% block content %}

<p>
<a href="{% url 'question_add' %}" class="btn btn-primary">{% trans "Add question" %}</a>
</p>

<p>
<input type="text" class="form-control filter" id="search" name="question" placeholder="{% trans "Filter.." %}" />
</p>
<table class="table table-striped">
  <thead>
    <tr>
      <th>{% trans "Question" %}</th>
      {# <th>{% trans "Active" %}</th> #}
      <th>{% trans "Added" %}</th>
      <th>{% trans "Last edit" %}</th>
      <th>{% trans "Actions" %}</th>
    </tr>
  </thead>
<tbody id="ajax-response"></tbody>
<tbody class="static">
{% for question in questions %}
<tr>
  <td>
    <!-- TODO add ajax easy edit -->
    {% if question.question_da and question.answer_da %}
    <div class="question-answer">
      <div class="question">{{ question.question_da }}</div>
      <div class="answer">{{ question.answer_da }}</div>
    </div>
    {% endif %}
    {% if question.question_en and question.answer_en %}
    <div class="question-answer">
      <div class="question">{{ question.question_en }}</div>
      <div class="answer">{{ question.answer_en }}</div>
    </div>
    {% endif %}
  </td>
  <td>{{ question.date_added }}</td>
  <td>{{ question.date_last_edit }}</td>
  <td>
    {% if perms.qa.change_question %}
    <a href="{% url 'question_edit' question.uuid %}" class="btn btn-success btn-xs" role="button">
      {% trans "Edit" %}
    </a>
    {% endif %}
    {% if perms.qa.delete_question %}
    <a href="{% url 'question_delete' question.uuid %}" class="btn btn-danger btn-xs" role="button">
      {% trans "Delete" %}
    </a>
    {% endif %}
  </td>
</tr>
{% endfor %}
</tbody>
</table>
<script>
Search.init();
</script>
{% endblock %}
